{% extends "frontend/base.html" %}

{% block content %}

<div class="container-xxl py-5 wow fadeInUp" data-wow-delay="0.1s">
            <div class="container">
                <div class="row gy-5 gx-4">
                    <div class="col-lg-8">
                        <div class="d-flex align-items-center mb-5">
                            <img class="flex-shrink-0 img-fluid border rounded" src="{{ company_detail.company_logo.url }}" alt="{{ company_detail.company_name }}" style="width: 80px; height: 80px;">
                            <div class="text-start ps-4">
                                <h5 class="mb-1">{{ company_detail.company_name }}</h5>
                                <h6 class="mb-1">{{ company_detail.job_role }}</h6>
                                <span class="text-truncate me-3"><i class="fa fa-map-marker-alt text-primary me-2"></i>{{ company_detail.city }}</span>
                                <span class="text-truncate me-3"><i class="far fa-clock text-primary me-2"></i>{{ company_detail.job_nature }}</span>
                                <span class="text-truncate me-0"><i class="far fa-money-bill-alt text-primary me-2"></i>{{ company_detail.salary_yearly_range }}</span>
                            </div>
                        </div>

                        <div class="mb-5">
                            <h4 class="mb-3">Job description</h4>
                            <p>{{ company_detail.company_description }}</p>
                            <h4 class="mb-3">Knowledge skills</h4>
                            <p>{{ company_detail.req_knowledge_skills_abilities }}</p>
                            <h4 class="mb-3">Qualifications</h4>
                            <p>{{ company_detail.education_experience }}</p>
                        </div>
                    </div>

                    <div class="col-lg-4">
                        <div class="bg-light rounded p-5 mb-4 wow slideInUp" data-wow-delay="0.1s">
                            <h4 class="mb-4">Job Summary</h4>
                            <p><i class="fa fa-angle-right text-primary me-2"></i>Posted On: {{ company_detail.posted_date }}</p>
                            <p><i class="fa fa-angle-right text-primary me-2"></i>Vacancy: {{ company_detail.vacancy }}</p>
                            <p><i class="fa fa-angle-right text-primary me-2"></i>Job Nature: {{ company_detail.job_nature }}</p>
                            <p><i class="fa fa-angle-right text-primary me-2"></i>Salary: {{ company_detail.salary_yearly_range }}</p>
                            <p><i class="fa fa-angle-right text-primary me-2"></i>Location: {{ company_detail.city }}, {{ company_detail.country }}</p>
                            <p class="m-0"><i class="fa fa-angle-right text-primary me-2"></i>End date: {{ company_detail.last_date_apply_application }}</p>
                        </div>
                        <div class="bg-light rounded p-5 wow slideInUp" data-wow-delay="0.1s">
                            <h4 class="mb-4">Company Detail</h4>
                            <p class="m-0">{{ company_detail.company_description }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            <div class="container">
            <div class="row">
            <div class="col-lg-12">
                <div class="mb-5">
                    <h4 class="mb-4">Apply For The Job</h4>
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}

                        {{ form.as_p }}

                        <div class="col-12">
                            <button class="btn btn-primary w-100" type="submit">Apply Now</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
<script>
    // JavaScript function to show a styled popup alert
    function showSuccessAlert() {
        // Create a div element for the alert
        var alertDiv = document.createElement('div');
        // Set class and styles for the alert
        alertDiv.className = 'alert success';
        // Set the alert message
        alertDiv.innerText = 'Job applied successfully!';
        // Append the alert to the body
        document.body.appendChild(alertDiv);
        // Remove the alert after 3 seconds
        setTimeout(function() {
            alertDiv.remove();
        }, 3000);
    }

    // Check if the URL contains a success parameter
    const urlParams = new URLSearchParams(window.location.search);
    const successParam = urlParams.get('success');

    // If the success parameter is present, show the styled popup alert
    if (successParam === 'true') {
        showSuccessAlert();
    }
</script>

<style>
    /* CSS for the styled alert */
    .alert {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: #4CAF50;
        color: white;
        padding: 15px;
        border-radius: 5px;
        z-index: 1000;
    }
</style>


{% endblock %}